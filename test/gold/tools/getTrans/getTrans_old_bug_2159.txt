chifra transactions  --account_for 0x7cfb89d6df1b89a678dcaf42b9c262593e881e22 0x20e4a5279519859c3b8af108fa9b3238f23d5522ceb0f7245080ec79ad8f97fd --fmt json
TEST[DATE|TIME] Transactions:  [0x20e4a5279519859c3b8af108fa9b3238f23d5522ceb0f7245080ec79ad8f97fd]
TEST[DATE|TIME] AccountFor:  0x7cfb89d6df1b89a678dcaf42b9c262593e881e22
TEST[DATE|TIME] OutputFn:  old_bug_2159_out.file
TEST[DATE|TIME] Caps:  cache,decache,raw,ether
TEST[DATE|TIME] Format:  json
{ "outputFilename": "--output_filename--" }
INFO[DATE|TIME] ------------------------------------------------------------
INFO[DATE|TIME] Contexts (1)
INFO[DATE|TIME] 013029304-00063:   13029304   13029304    13029304 first-last
TEST[DATE|TIME] Start of trial balance report
TEST[DATE|TIME] Needs correction for eth
TEST[DATE|TIME] Needs correction for eth
TEST[DATE|TIME] ===================================================
TEST[DATE|TIME] ====> eth
TEST[DATE|TIME] ===================================================
TEST[DATE|TIME] ledger.blockNumber:     13029304
TEST[DATE|TIME] prevBlock:              13029304
TEST[DATE|TIME] transfer.blockNumber:   13029304
TEST[DATE|TIME] nextBlock:              13029304
TEST[DATE|TIME] isPrevDiff:             false
TEST[DATE|TIME] isNextDiff:             false
TEST[DATE|TIME] ---------------------------------------------------
TEST[DATE|TIME] Trial balance:
TEST[DATE|TIME]    reconciliationType:  first-last
TEST[DATE|TIME]    assetType:           eth
TEST[DATE|TIME]    accountedFor:        0x7cfb89d6df1b89a678dcaf42b9c262593e881e22
TEST[DATE|TIME]    sender:              0x881690382102106b00a99e3db86056d0fc71eee6
TEST[DATE|TIME]    recipient:           0x7cfb89d6df1b89a678dcaf42b9c262593e881e22
TEST[DATE|TIME]    assetAddr:           0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
TEST[DATE|TIME]    assetSymbol:         WEI
TEST[DATE|TIME]    decimals:            18
TEST[DATE|TIME]    hash:                0x20e4a5279519859c3b8af108fa9b3238f23d5522ceb0f7245080ec79ad8f97fd
TEST[DATE|TIME]    timestamp:           1629024623
TEST[DATE|TIME]    blockNumber:         13029304
TEST[DATE|TIME]    transactionIndex:    63
TEST[DATE|TIME]    logIndex:            0
TEST[DATE|TIME]    priceSource:         not-priced
TEST[DATE|TIME]    spotPrice:           0
TEST[DATE|TIME]    begBal:              0
TEST[DATE|TIME]    totalIn:             0
TEST[DATE|TIME]    totalOut:            0
TEST[DATE|TIME]    amountNet:           0
TEST[DATE|TIME]    endBal:              53.712605193010669297
TEST[DATE|TIME]    begBalDiff:          0
TEST[DATE|TIME]    endBalDiff:          -53.712605193010669297
TEST[DATE|TIME]    endBalCalc:          0
TEST[DATE|TIME]    moneyMoved:          false
TEST[DATE|TIME]    reconciled:          false
TEST[DATE|TIME]  ^^ we need to fix this ^^
TEST[DATE|TIME] ---------------------------------------------------
TEST[DATE|TIME] End of trial balance report
TEST[DATE|TIME] Trial balance failed for  0x20e4a5279519859c3b8af108fa9b3238f23d5522ceb0f7245080ec79ad8f97fd need to decend into traces
INFO[DATE|TIME] Skipping delegatecall to 0xd9db270c1b5e3bd161e8c8503c55ceabee709552 0
INFO[DATE|TIME] Skipping delegatecall to 0xe592427a0aece92de3edee1f18e0157c05861564 0
INFO[DATE|TIME] Skipping delegatecall to 0xa2327a938febf5fec13bacfb16ae10ecbc4cbdcf 0
INFO[DATE|TIME] Skipping delegatecall to 0xa2327a938febf5fec13bacfb16ae10ecbc4cbdcf 0
INFO[DATE|TIME] Skipping delegatecall to 0xa2327a938febf5fec13bacfb16ae10ecbc4cbdcf 0
INFO[DATE|TIME] Skipping delegatecall to 0xe592427a0aece92de3edee1f18e0157c05861564 0
INFO[DATE|TIME] Skipping delegatecall to 0xd9db270c1b5e3bd161e8c8503c55ceabee709552 53.712605193010669297
TEST[DATE|TIME] Start of trial balance report
TEST[DATE|TIME] =========================================================
TEST[DATE|TIME] ===> PRICING FOR 0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee (WEI) using Uniswap
TEST[DATE|TIME] =========================================================
TEST[DATE|TIME] blockNumber:         13029304
TEST[DATE|TIME] source1 (uni/mkr):   0x5c69bee701ef814a2b6a3edd4b1652cb9cc5aa6f
TEST[DATE|TIME] str0 (call):         getPair(0x6b175474e89094c44da98b954eedeac495271d0f, 0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2)
TEST[DATE|TIME] source2 (pair):      0xa478c2975ab1ea89e8196811f51a7b7ade33eb11
TEST[DATE|TIME] str1 (call/data):    getReserves()
TEST[DATE|TIME] first:               0x6b175474e89094c44da98b954eedeac495271d0f
TEST[DATE|TIME] second:              0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2
TEST[DATE|TIME] reversed:            false
TEST[DATE|TIME] float0:              6.3360257631135926086e+25
TEST[DATE|TIME] float1:              2.0055629846958204254e+22
TEST[DATE|TIME] float2:              1
TEST[DATE|TIME] bigPrice:            3159.2255199477390053
TEST[DATE|TIME] price:               3159.225519947739
TEST[DATE|TIME] source:              uniswap
TEST[DATE|TIME] ===================================================
TEST[DATE|TIME] ====> trace-eth
TEST[DATE|TIME] ===================================================
TEST[DATE|TIME] ledger.blockNumber:     13029304
TEST[DATE|TIME] prevBlock:              13029304
TEST[DATE|TIME] transfer.blockNumber:   13029304
TEST[DATE|TIME] nextBlock:              13029304
TEST[DATE|TIME] isPrevDiff:             false
TEST[DATE|TIME] isNextDiff:             false
TEST[DATE|TIME] ---------------------------------------------------
TEST[DATE|TIME] Trial balance:
TEST[DATE|TIME]    reconciliationType:  first-last
TEST[DATE|TIME]    assetType:           trace-eth
TEST[DATE|TIME]    accountedFor:        0x7cfb89d6df1b89a678dcaf42b9c262593e881e22
TEST[DATE|TIME]    sender:              0xe592427a0aece92de3edee1f18e0157c05861564
TEST[DATE|TIME]    recipient:           0x7cfb89d6df1b89a678dcaf42b9c262593e881e22
TEST[DATE|TIME]    assetAddr:           0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
TEST[DATE|TIME]    assetSymbol:         WEI
TEST[DATE|TIME]    decimals:            18
TEST[DATE|TIME]    hash:                0x20e4a5279519859c3b8af108fa9b3238f23d5522ceb0f7245080ec79ad8f97fd
TEST[DATE|TIME]    timestamp:           1629024623
TEST[DATE|TIME]    blockNumber:         13029304
TEST[DATE|TIME]    transactionIndex:    63
TEST[DATE|TIME]    logIndex:            0
TEST[DATE|TIME]    priceSource:         uniswap
TEST[DATE|TIME]    spotPrice:           3159.225519947739
TEST[DATE|TIME]    begBal:              0
TEST[DATE|TIME]    internalIn:          53.712605193010669297
TEST[DATE|TIME]    totalIn:             53.712605193010669297
TEST[DATE|TIME]    totalOut:            0
TEST[DATE|TIME]    amountNet:           53.712605193010669297
TEST[DATE|TIME]    endBal:              53.712605193010669297
TEST[DATE|TIME]    begBalDiff:          0
TEST[DATE|TIME]    endBalDiff:          0
TEST[DATE|TIME]    endBalCalc:          53.712605193010669297
TEST[DATE|TIME]    moneyMoved:          true
TEST[DATE|TIME]    reconciled:          true
TEST[DATE|TIME] ---------------------------------------------------
TEST[DATE|TIME] End of trial balance report
TEST[DATE|TIME] Start of trial balance report
TEST[DATE|TIME] =========================================================
TEST[DATE|TIME] ===> PRICING FOR 0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48 (USDC) 
TEST[DATE|TIME] =========================================================
TEST[DATE|TIME] stable-coin
TEST[DATE|TIME] ===================================================
TEST[DATE|TIME] ====> token
TEST[DATE|TIME] ===================================================
TEST[DATE|TIME] ledger.blockNumber:     13029304
TEST[DATE|TIME] prevBlock:              13029304
TEST[DATE|TIME] transfer.blockNumber:   13029304
TEST[DATE|TIME] nextBlock:              13029304
TEST[DATE|TIME] isPrevDiff:             false
TEST[DATE|TIME] isNextDiff:             false
TEST[DATE|TIME] ---------------------------------------------------
TEST[DATE|TIME] Trial balance:
TEST[DATE|TIME]    reconciliationType:  first-last
TEST[DATE|TIME]    assetType:           token
TEST[DATE|TIME]    accountedFor:        0x7cfb89d6df1b89a678dcaf42b9c262593e881e22
TEST[DATE|TIME]    sender:              0x7cfb89d6df1b89a678dcaf42b9c262593e881e22
TEST[DATE|TIME]    recipient:           0x88e6a0c2ddd26feeb64f039a2c41296fcb3f5640
TEST[DATE|TIME]    assetAddr:           0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48
TEST[DATE|TIME]    assetSymbol:         USDC
TEST[DATE|TIME]    decimals:            6
TEST[DATE|TIME]    hash:                0x20e4a5279519859c3b8af108fa9b3238f23d5522ceb0f7245080ec79ad8f97fd
TEST[DATE|TIME]    timestamp:           1629024623
TEST[DATE|TIME]    blockNumber:         13029304
TEST[DATE|TIME]    transactionIndex:    63
TEST[DATE|TIME]    logIndex:            83
TEST[DATE|TIME]    priceSource:         stable-coin
TEST[DATE|TIME]    spotPrice:           1
TEST[DATE|TIME]    begBal:              0.000000339243527823
TEST[DATE|TIME]    totalIn:             0
TEST[DATE|TIME]    amountOut:           0.000000169622
TEST[DATE|TIME]    totalOut:            0.000000169622
TEST[DATE|TIME]    amountNet:           -0.000000169622
TEST[DATE|TIME]    endBal:              0.000000169621527823
TEST[DATE|TIME]    begBalDiff:          0
TEST[DATE|TIME]    endBalDiff:          0
TEST[DATE|TIME]    endBalCalc:          0.000000169621527823
TEST[DATE|TIME]    moneyMoved:          true
TEST[DATE|TIME]    reconciled:          true
TEST[DATE|TIME] ---------------------------------------------------
TEST[DATE|TIME] End of trial balance report
----
Results in ./old_bug_2159_out.file
{
  "data": [
    {
      "accountedFor": "0x7cfb89d6df1b89a678dcaf42b9c262593e881e22",
      "amountIn": "0",
      "amountNet": "53712605193010669297",
      "amountOut": "0",
      "assetAddr": "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",
      "assetSymbol": "WEI",
      "assetType": "trace-eth",
      "begBal": "0",
      "begBalDiff": "0",
      "blockNumber": 13029304,
      "correctingIn": "0",
      "correctingOut": "0",
      "correctingReason": "",
      "date": "2021-08-15 10:50:23 UTC",
      "decimals": 18,
      "endBal": "53712605193010669297",
      "endBalCalc": "53712605193010669297",
      "endBalDiff": "0",
      "gasOut": "0",
      "internalIn": "53712605193010669297",
      "internalOut": "0",
      "logIndex": 0,
      "minerBaseRewardIn": "0",
      "minerNephewRewardIn": "0",
      "minerTxFeeIn": "0",
      "minerUncleRewardIn": "0",
      "prefundIn": "0",
      "priceSource": "uniswap",
      "recipient": "0x7cfb89d6df1b89a678dcaf42b9c262593e881e22",
      "reconciled": true,
      "reconciliationType": "first-last",
      "selfDestructIn": "0",
      "selfDestructOut": "0",
      "sender": "0xe592427a0aece92de3edee1f18e0157c05861564",
      "spotPrice": 3159.225519947739,
      "timestamp": 1629024623,
      "totalIn": "53712605193010669297",
      "totalOut": "0",
      "totalOutLessGas": "0",
      "transactionHash": "0x20e4a5279519859c3b8af108fa9b3238f23d5522ceb0f7245080ec79ad8f97fd",
      "transactionIndex": 63
    },
    {
      "accountedFor": "0x7cfb89d6df1b89a678dcaf42b9c262593e881e22",
      "amountIn": "0",
      "amountNet": "-169622000000",
      "amountOut": "169622000000",
      "assetAddr": "0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",
      "assetSymbol": "USDC",
      "assetType": "token",
      "begBal": "339243527823",
      "begBalDiff": "0",
      "blockNumber": 13029304,
      "correctingIn": "0",
      "correctingOut": "0",
      "correctingReason": "",
      "date": "2021-08-15 10:50:23 UTC",
      "decimals": 6,
      "endBal": "169621527823",
      "endBalCalc": "169621527823",
      "endBalDiff": "0",
      "gasOut": "0",
      "internalIn": "0",
      "internalOut": "0",
      "logIndex": 83,
      "minerBaseRewardIn": "0",
      "minerNephewRewardIn": "0",
      "minerTxFeeIn": "0",
      "minerUncleRewardIn": "0",
      "prefundIn": "0",
      "priceSource": "stable-coin",
      "recipient": "0x88e6a0c2ddd26feeb64f039a2c41296fcb3f5640",
      "reconciled": true,
      "reconciliationType": "first-last",
      "selfDestructIn": "0",
      "selfDestructOut": "0",
      "sender": "0x7cfb89d6df1b89a678dcaf42b9c262593e881e22",
      "spotPrice": 1,
      "timestamp": 1629024623,
      "totalIn": "0",
      "totalOut": "169622000000",
      "totalOutLessGas": "169622000000",
      "transactionHash": "0x20e4a5279519859c3b8af108fa9b3238f23d5522ceb0f7245080ec79ad8f97fd",
      "transactionIndex": 63
    }
  ]
}

